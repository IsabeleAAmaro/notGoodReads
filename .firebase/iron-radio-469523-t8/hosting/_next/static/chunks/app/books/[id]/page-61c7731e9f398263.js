(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[511],{8226:(e,t,a)=>{Promise.resolve().then(a.bind(a,9936))},9936:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(5155),l=a(2115),n=a(6046),d=a(8361),i=a(4085),r=a(7837),c=a(9134),o=a(5739),x=a(1069),u=a(9602),h=a(865),m=a(7401);let f=(0,m.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),p=(0,m.A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);function j(){let e=(0,n.useParams)().id,t=(0,n.useRouter)(),{toast:a}=(0,c.d)(),{token:m,isLoading:j}=(0,x.A)(),[g,y]=(0,l.useState)(null),[N,v]=(0,l.useState)(!0),[b,w]=(0,l.useState)(!1),[k,C]=(0,l.useState)(!1),[L,E]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(!j&&!m){t.push("/signin");return}m&&e&&S()},[m,j,e]);let S=async()=>{try{v(!0);let t=await (0,o.QY)(m,e);y(t)}catch(e){a({title:"Error",description:"Failed to fetch book details",variant:"destructive"}),t.push("/dashboard")}finally{v(!1)}},A=async t=>{try{E(!0),await (0,o.r3)(m,e,t),a({title:"Success",description:"Book updated successfully"}),y(e=>e?{...e,...t}:null),w(!1)}catch(e){a({title:"Error",description:"Failed to update book",variant:"destructive"})}finally{E(!1)}},D=async()=>{try{E(!0),await (0,o.HA)(m,e),a({title:"Success",description:"Book deleted successfully"}),t.push("/dashboard")}catch(e){a({title:"Error",description:"Failed to delete book",variant:"destructive"})}finally{E(!1),C(!1)}};return j||N?(0,s.jsx)("div",{children:"Loading..."}):g?(0,s.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,s.jsx)("main",{className:"flex-1 p-4 md:p-6",children:(0,s.jsx)("div",{className:"container mx-auto max-w-3xl space-y-6",children:b?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Edit Reading"}),(0,s.jsx)(i.$,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>C(!0),children:(0,s.jsx)(f,{className:"h-4 w-4 text-destructive"})})]}),(0,s.jsx)(d.k,{initialData:g,onSubmit:A,isLoading:L})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:g.title}),(0,s.jsx)(i.$,{variant:"outline",size:"icon",onClick:()=>{w(!0)},children:(0,s.jsx)(p,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[(0,s.jsxs)("div",{className:"text-lg",children:["by ",g.author]}),(0,s.jsx)("div",{className:"px-3 py-1 text-sm rounded-full ".concat((e=>{switch(e){case"Want to Read":return"bg-secondary text-secondary-foreground";case"Reading":return"bg-primary text-primary-foreground";case"Completed":return"bg-accent text-accent-foreground";default:return"bg-muted text-muted-foreground"}})(u.x[g.status])),children:u.x[g.status]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"flex",children:(e=>{let t=[],a=Math.floor(e);for(let e=0;e<a;e++)t.push((0,s.jsx)(h.A,{className:"h-5 w-5 fill-current"},"full-".concat(e)));e%1!=0&&t.push((0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[(0,s.jsx)("path",{d:"M12 17.8 5.8 21 7 14.1 2 9.3l7-1L12 2"}),(0,s.jsx)("path",{fill:"currentColor",d:"M12 2v15.8"})]},"half"));let l=5-t.length;for(let e=0;e<l;e++)t.push((0,s.jsx)(h.A,{className:"h-5 w-5"},"empty-".concat(e)));return t})(g.rating)}),(0,s.jsx)("span",{className:"text-muted-foreground",children:g.rating.toFixed(1)})]}),(0,s.jsx)("div",{className:"bg-accent inline-block px-3 py-1 rounded",children:g.genre}),g.notes&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Notes"}),(0,s.jsx)("div",{className:"rounded-lg border p-4",children:g.notes})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Added"}),(0,s.jsx)("div",{className:"text-muted-foreground",children:new Date(g.created_at).toLocaleDateString()})]}),g.created_at!==g.updated_at&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Last Updated"}),(0,s.jsx)("div",{className:"text-muted-foreground",children:new Date(g.updated_at).toLocaleDateString()})]})]})]})})}),(0,s.jsx)(r.lG,{open:k,onOpenChange:C,children:(0,s.jsxs)(r.Cf,{children:[(0,s.jsxs)(r.c7,{children:[(0,s.jsx)(r.L3,{children:"Delete Book"}),(0,s.jsxs)(r.rr,{children:['Are you sure you want to delete "',g.title,'"? This action cannot be undone.']})]}),(0,s.jsxs)(r.Es,{children:[(0,s.jsx)(i.$,{variant:"outline",onClick:()=>C(!1),disabled:L,children:"Cancel"}),(0,s.jsx)(i.$,{variant:"destructive",onClick:D,disabled:L,children:L?"Deleting...":"Delete"})]})]})})]}):(0,s.jsx)("div",{children:"Book not found"})}},7837:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>x,Es:()=>h,L3:()=>m,c7:()=>u,lG:()=>r,rr:()=>f});var s=a(5155),l=a(2115),n=a(6217),d=a(767),i=a(9602);let r=n.bL;n.l9;let c=n.ZL;n.bm;let o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(n.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});o.displayName=n.hJ.displayName;let x=l.forwardRef((e,t)=>{let{className:a,children:l,...r}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(o,{}),(0,s.jsxs)(n.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r,children:[l,(0,s.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=n.UC.displayName;let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};u.displayName="DialogHeader";let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};h.displayName="DialogFooter";let m=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(n.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});m.displayName=n.hE.displayName;let f=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(n.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...l})});f.displayName=n.VY.displayName},865:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[246,759,289,230,499,236,441,517,358],()=>t(8226)),_N_E=e.O()}]);