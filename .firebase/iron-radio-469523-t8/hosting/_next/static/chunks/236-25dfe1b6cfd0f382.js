"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[236],{8361:(e,t,a)=>{a.d(t,{k:()=>j});var r=a(5155),o=a(2115),s=a(4085),n=a(2336),i=a(5785),l=a(9957),d=a(1719),c=a(1902),u=a(8867),f=a(9602);let h=l.bL;l.YJ;let p=l.WT,m=o.forwardRef((e,t)=>{let{className:a,children:o,...s}=e;return(0,r.jsxs)(l.l9,{ref:t,className:(0,f.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...s,children:[o,(0,r.jsx)(l.In,{asChild:!0,children:(0,r.jsx)(d.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.l9.displayName;let g=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(l.PP,{ref:t,className:(0,f.cn)("flex cursor-default items-center justify-center py-1",a),...o,children:(0,r.jsx)(c.A,{className:"h-4 w-4"})})});g.displayName=l.PP.displayName;let x=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(l.wn,{ref:t,className:(0,f.cn)("flex cursor-default items-center justify-center py-1",a),...o,children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})});x.displayName=l.wn.displayName;let y=o.forwardRef((e,t)=>{let{className:a,children:o,position:s="popper",...n}=e;return(0,r.jsx)(l.ZL,{children:(0,r.jsxs)(l.UC,{ref:t,className:(0,f.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:s,...n,children:[(0,r.jsx)(g,{}),(0,r.jsx)(l.LM,{className:(0,f.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:o}),(0,r.jsx)(x,{})]})})});y.displayName=l.UC.displayName,o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(l.JU,{ref:t,className:(0,f.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...o})}).displayName=l.JU.displayName;let v=o.forwardRef((e,t)=>{let{className:a,children:o,...s}=e;return(0,r.jsxs)(l.q7,{ref:t,className:(0,f.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.VF,{children:(0,r.jsx)(u.A,{className:"h-4 w-4"})})}),(0,r.jsx)(l.p4,{children:o})]})});function b(e){let{fill:t}=e;return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"half-fill",x1:"0",x2:"1",y1:"0",y2:"0",children:[(0,r.jsx)("stop",{offset:"50%",stopColor:"currentColor"}),(0,r.jsx)("stop",{offset:"50%",stopColor:"transparent"})]})}),(0,r.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",fill:"full"===t?"currentColor":"half"===t?"url(#half-fill)":"none"})]})}v.displayName=l.q7.displayName,o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(l.wv,{ref:t,className:(0,f.cn)("-mx-1 my-1 h-px bg-muted",a),...o})}).displayName=l.wv.displayName;var w=a(371);function j(e){var t,a;let{initialData:l,onSubmit:d,isLoading:c}=e,[u,g]=(0,o.useState)({title:"",author:"",genre:"",status:"Want to Read",rating:0,notes:""}),[x,j]=(0,o.useState)(null);(0,o.useEffect)(()=>{if(l){let e=l.status;g({...l,status:e?f.x[e]:"Want to Read"})}},[l]);let N=e=>{let{name:t,value:a}=e.target;g(e=>({...e,[t]:a}))},k=(e,t)=>{g(a=>({...a,[e]:t}))},S=e=>{g(t=>({...t,rating:e}))};return(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d({...u,status:u.status?f.J[u.status]:void 0})},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.J,{htmlFor:"title",children:"Title"}),(0,r.jsx)(n.p,{id:"title",name:"title",placeholder:"Book title",required:!0,value:u.title,onChange:N})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.J,{htmlFor:"author",children:"Author"}),(0,r.jsx)(n.p,{id:"author",name:"author",placeholder:"Author name",required:!0,value:u.author,onChange:N})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.J,{htmlFor:"genre",children:"Genre"}),(0,r.jsx)(n.p,{id:"genre",name:"genre",placeholder:"Book genre",required:!0,value:u.genre,onChange:N})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.J,{htmlFor:"status",children:"Reading Status"}),(0,r.jsxs)(h,{value:u.status,onValueChange:e=>k("status",e),children:[(0,r.jsx)(m,{id:"status",children:(0,r.jsx)(p,{placeholder:"Select status"})}),(0,r.jsxs)(y,{children:[(0,r.jsx)(v,{value:"Want to Read",children:"Want to Read"}),(0,r.jsx)(v,{value:"Reading",children:"Reading"}),(0,r.jsx)(v,{value:"Completed",children:"Completed"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.J,{htmlFor:"rating",children:"Rating"}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",onMouseLeave:()=>j(null),children:[[1,2,3,4,5].map(e=>{var t;let a=null!==(t=null!=x?x:u.rating)&&void 0!==t?t:0,o=a>=e?"full":a>=e-.5?"half":"none";return(0,r.jsxs)("div",{className:"relative",onMouseEnter:()=>j(e),onClick:()=>S(e),children:[(0,r.jsx)("div",{className:"absolute inset-0 w-1/2",onMouseEnter:()=>j(e-.5),onClick:t=>{t.stopPropagation(),S(e-.5)}}),(0,r.jsx)(b,{fill:o})]},e)}),(0,r.jsx)("span",{className:"ml-2 text-sm",children:null===(t=u.rating)||void 0===t?void 0:t.toFixed(1)})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.J,{htmlFor:"notes",children:"Notes"}),(0,r.jsx)(w.T,{id:"notes",name:"notes",placeholder:"Your thoughts about the book...",rows:5,maxLength:1e3,value:u.notes,onChange:N}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground text-right",children:[(null===(a=u.notes)||void 0===a?void 0:a.length)||0,"/1000"]})]}),(0,r.jsx)(s.$,{type:"submit",className:"w-full",disabled:c,children:c?"Saving...":"Save"})]})}},4085:(e,t,a)=>{a.d(t,{$:()=>d,r:()=>l});var r=a(5155),o=a(2115),s=a(2317),n=a(1027),i=a(9602);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=o.forwardRef((e,t)=>{let{className:a,variant:o,size:n,asChild:d=!1,...c}=e,u=d?s.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(l({variant:o,size:n,className:a})),ref:t,...c})});d.displayName="Button"},2336:(e,t,a)=>{a.d(t,{p:()=>n});var r=a(5155),o=a(2115),s=a(9602);let n=o.forwardRef((e,t)=>{let{className:a,type:o,...n}=e;return(0,r.jsx)("input",{type:o,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},5785:(e,t,a)=>{a.d(t,{J:()=>d});var r=a(5155),o=a(2115),s=a(6195),n=a(1027),i=a(9602);let l=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(s.b,{ref:t,className:(0,i.cn)(l(),a),...o})});d.displayName=s.b.displayName},371:(e,t,a)=>{a.d(t,{T:()=>n});var r=a(5155),o=a(2115),s=a(9602);let n=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...o})});n.displayName="Textarea"},9134:(e,t,a)=>{a.d(t,{d:()=>u});var r=a(2115);let o=0,s=new Map,n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}};function i(e){if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)}function l(e){d=n(d,e),c.forEach(e=>{e(d)})}let d={toasts:[]},c=[];function u(){let[e,t]=(0,r.useState)(d);(0,r.useEffect)(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[]);let a=(0,r.useCallback)(e=>{let t=(o=(o+1)%Number.MAX_VALUE).toString(),a=()=>l({type:"DISMISS_TOAST",toastId:t});return l({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:t}})}},[]);return{...e,toast:a,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},5739:(e,t,a)=>{a.d(t,{Ci:()=>i,DY:()=>s,HA:()=>h,Lx:()=>o,QY:()=>c,ec:()=>l,eg:()=>n,iC:()=>u,r3:()=>f,zy:()=>d});let r="http://localhost:8000";async function o(e,t){let a=await fetch("".concat(r,"/api/token/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(!a.ok)throw Error("Login failed");let o=await a.json();return{access:o.access,refresh:o.refresh,user:o.user}}async function s(e){let t=await fetch("".concat(r,"/api/auth/register/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,email:e.email,first_name:e.first_name,last_name:e.last_name,password:e.password,password_confirm:e.password_confirm})});if(!t.ok)throw Error((await t.json()).detail||"Registration failed");return t.json()}async function n(e,t){let a=await fetch("".concat(r,"/api/auth/profile/"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error("Failed to update user profile");return a.json()}async function i(e){if(!(await fetch("".concat(r,"/api/auth/delete/"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}})).ok)throw Error("Failed to delete account");return!0}async function l(e,t,a){let o=await fetch("".concat(r,"/api/auth/change-password/"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({current_password:t,new_password:a})});if(!o.ok)throw Error((await o.json()).detail||"Failed to change password");return o.json()}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new URLSearchParams(t).toString(),o="".concat(r,"/api/reading/books/").concat(a?"?".concat(a):""),s=await fetch(o,{headers:{Authorization:"Bearer ".concat(e)}});if(!s.ok)throw Error("Failed to fetch books");return s.json()}async function c(e,t){let a=await fetch("".concat(r,"/api/reading/books/").concat(t,"/"),{headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok)throw Error("Failed to fetch book");return a.json()}async function u(e,t){let a=await fetch("".concat(r,"/api/reading/books/"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json()).detail||"Failed to create book");return a.json()}async function f(e,t,a){let o=await fetch("".concat(r,"/api/reading/books/").concat(t,"/"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(a)});if(!o.ok)throw Error("Failed to update book");return o.json()}async function h(e,t){if(!(await fetch("".concat(r,"/api/reading/books/").concat(t,"/"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}})).ok)throw Error("Failed to delete book");return!0}},1069:(e,t,a)=>{a.d(t,{A:()=>d,AuthProvider:()=>l});var r=a(5155),o=a(2115),s=a(6046),n=a(9208);let i=(0,o.createContext)(void 0);function l(e){let{children:t}=e,[a,l]=(0,o.useState)(null),[d,c]=(0,o.useState)(null),[u,f]=(0,o.useState)(!0);(0,s.useRouter)();let h=()=>{try{n.A.remove("token",{path:"/"}),localStorage.removeItem("user"),c(null),l(null),window.location.href="/"}catch(e){console.error("Error logging out:",e)}};return(0,o.useEffect)(()=>{(async()=>{let e=n.A.get("token");if(e)try{let t=await fetch("".concat("http://localhost:8000","/api/auth/verify-token/"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let a=await t.json();c(e),l(a),localStorage.setItem("user",JSON.stringify(a))}else h()}catch(e){console.error("Error verifying token:",e),h()}finally{f(!1)}else f(!1)})()},[]),(0,r.jsx)(i.Provider,{value:{user:a,token:d,login:(e,t)=>{try{n.A.set("token",e,{expires:7,path:"/"}),t&&localStorage.setItem("user",JSON.stringify(t)),c(e),l(t),window.location.href="/dashboard"}catch(e){console.error("Error saving authentication data:",e)}},logout:h,isLoading:u},children:t})}function d(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9602:(e,t,a)=>{a.d(t,{J:()=>i,cn:()=>s,x:()=>n});var r=a(3463),o=a(9795);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,o.QP)((0,r.$)(t))}let n={QUERO_LER:"Want to Read",LENDO:"Reading",CONCLUIDO:"Completed"},i={"Want to Read":"QUERO_LER",Reading:"LENDO",Completed:"CONCLUIDO"}}}]);